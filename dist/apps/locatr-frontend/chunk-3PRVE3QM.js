import{a as Y}from"./chunk-SY2PBC2O.js";import{$ as L,Fa as x,H as D,L as f,Na as u,R as B,S as F,Sa as H,U as y,Ua as U,Y as b,Ya as W,Z as l,_ as c,_a as X,a as R,b as z,d as s,da as O,ea as j,fa as k,ha as A,i as T,ia as Q,j as E,ja as V,ka as K,l as _,la as q,lb as G,ma as m,na as C,p as v,t as n,ta as h,u as d,y as P,z as N}from"./chunk-GHWY76KD.js";var J=(()=>{let i=class i{constructor(){this.map=null,this.apiKey="AIzaSyBC_xFYzPzcK2zQoVAvwk93X1lNFzXuU_U",this.defaultMapOptions={center:{lat:-28.4793,lng:24.6727},zoom:6},this.createMarker=(e,t)=>s(this,null,function*(){let{AdvancedMarkerElement:o,PinElement:r}=t,p={lat:e.lat,lng:e.lng},$=new r({scale:.875}),w=new o({position:p,map:this.map,content:$.element,title:e.label,gmpClickable:!0,collisionBehavior:google.maps.CollisionBehavior.REQUIRED});return w.addListener("click",({domEvent:tt})=>{let{target:nt}=tt,I=new google.maps.InfoWindow;I.close(),I.setContent(w.title),I.open(w.map,w)}),p}),this.loadMapData=e=>s(this,null,function*(){if(this.map&&e?.length){let t=yield google.maps.importLibrary("marker"),o=new google.maps.LatLngBounds;for(let r of e){let p=yield this.createMarker(r,t);o.extend(p)}this.map.fitBounds(o),setTimeout(()=>{this.map?.panToBounds(o)},1e3)}}),this.initializeLoader()}initializeLoader(){this.loader=new G({apiKey:this.apiKey,version:"beta",libraries:["places","marker"]})}loadMap(e,t){return s(this,null,function*(){let{Map:o}=yield this.loader.importLibrary("maps");this.map=new o(e,z(R({},this.defaultMapOptions),{mapId:t}))})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();var et=["mapContainer"],ut=(()=>{let i=class i{constructor(){this.googleMapsService=n(J),this.mapId=D.required({alias:"id"}),this.mapData=D([],{alias:"data"}),this.mapContainer=F("mapContainer"),x(()=>s(this,null,function*(){yield this.loadMap()}))}loadMap(){return s(this,null,function*(){if(this.mapContainer()&&this.mapId()){let e=this.mapContainer()?.nativeElement;yield this.googleMapsService.loadMap(e,this.mapId()),yield this.googleMapsService.loadMapData(this.mapData())}})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=d({type:i,selectors:[["app-google-map"]],viewQuery:function(t,o){t&1&&K(o.mapContainer,et,5),t&2&&q()},inputs:{mapId:[1,"id","mapId"],mapData:[1,"data","mapData"]},standalone:!0,features:[h],decls:2,vars:0,consts:[["mapContainer",""],["id","map",1,"map-container"]],template:function(t,o){t&1&&L(0,"div",1,0)},dependencies:[u],styles:[".map-container[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:.375rem;border-width:1px;padding:.25rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}"]});let a=i;return a})();var Z=(()=>{let i=class i{constructor(){this._loading=B(!1)}get loading(){return this._loading}show(){this._loading.set(!0)}hide(){this._loading.set(!1)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();function it(a,i){a&1&&(l(0,"div",0)(1,"h1"),m(2,"Please wait..."),c()())}var Tt=(()=>{let i=class i{constructor(){this.loader=n(Z),this.loading=!1,x(()=>{this.loading=this.loader.loading()})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=d({type:i,selectors:[["app-loader"]],standalone:!0,features:[h],decls:1,vars:1,consts:[[1,"loader"]],template:function(t,o){t&1&&y(0,it,3,0,"div",0),t&2&&b(o.loading?0:-1)},dependencies:[u],styles:[".loader[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(30 41 59 / var(--tw-bg-opacity));font-size:1.5rem;line-height:2rem;font-weight:500;--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity));position:fixed;z-index:50;display:flex;height:100vh;width:100vw;align-items:center;justify-content:center}"]});let a=i;return a})();var at=["offcanvas"];function ot(a,i){if(a&1){let M=O();l(0,"button",3),j("click",function(){P(M);let t=k();return N(t.openCanvas())}),m(1),c()}if(a&2){let M=k();f(),C(M.title)}}var Ot=(()=>{let i=class i{constructor(){this.pageTitle="Default Title",this.pageSubtitle="Default Subtitle",this.showCreateButton=!1,this.title="",this.entityName="",this.router=n(X),this.titleService=n(H),this.activatedRoute=n(W),this.offcanvasService=n(Y)}ngOnInit(){this.setupRouterEventsSubscription(),this.setInitialTitleAndSubtitle()}openCanvas(){this.offcanvasService.open(this.entityName)}setupRouterEventsSubscription(){this.router.events.pipe(_(e=>e instanceof U),T(()=>this.activatedRoute),T(e=>this.getPrimaryRoute(e)),_(e=>e.outlet==="primary"),E(e=>e.data)).subscribe(e=>this.updatePageInfo(e))}updatePageInfo(e){this.pageTitle=e.title||"Default Title",this.pageSubtitle=e.subtitle||"Default Subtitle",this.title="Add "+e.entityName,e.entityName!==void 0?(this.entityName=e.entityName,this.showCreateButton=!0):this.showCreateButton=!1,this.titleService.setTitle(this.pageTitle)}setInitialTitleAndSubtitle(){let e=this.activatedRoute.snapshot,t=this.getPrimaryRoute(e),o=t.data.title||"Default Title",r=t.data.subtitle||"Default Subtitle",p="Add "+t.data.entityName;t.data.entityName!==void 0&&(this.entityName=t.data.entityName,this.showCreateButton=!0),this.title=p,this.pageTitle=o,this.pageSubtitle=r,this.titleService.setTitle(o)}getPrimaryRoute(e){let t=e;for(;t.firstChild;)t=t.firstChild;return t}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=d({type:i,selectors:[["app-content-header"]],viewQuery:function(t,o){if(t&1&&A(at,5),t&2){let r;Q(r=V())&&(o.offcanvas=r.first)}},standalone:!0,features:[h],decls:8,vars:3,consts:[[1,"prose","text-pretty"],[1,"mb-1"],[1,"btn","capitalize"],[1,"btn","capitalize",3,"click"]],template:function(t,o){t&1&&(l(0,"header")(1,"div",0)(2,"h2",1),m(3),c(),l(4,"h3"),m(5),c()(),l(6,"div"),y(7,ot,2,1,"button",2),c()()),t&2&&(f(3),C(o.pageTitle),f(2),C(o.pageSubtitle),f(2),b(o.showCreateButton?7:-1))},dependencies:[u],styles:["header[_ngcontent-%COMP%]{border-radius:.375rem;border-width:1px;padding:1rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);display:flex;align-items:center;justify-content:space-between;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-style:italic}"]});let a=i;return a})();export{Ot as a,ut as b,Tt as c};
